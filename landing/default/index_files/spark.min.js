(function(window,document){var sprk=window.sprk||{};sprk.on=function(element,type,handler,useCapture){if(element.addEventListener){return element.addEventListener(type,handler,useCapture)}if(element.attachEvent){return element.attachEvent("on"+type,handler)}element["on"+type]=handler};sprk.el=function(e,tag){var el=e.target||e.srcElement;return tag?sprk.prnt(el,tag):el};sprk.prnt=function(el,tag){tag=tag.toLowerCase();while(el.parentElement&&el.tagName.toLowerCase()!=tag){el=el.parentElement}return el&&el.tagName.toLowerCase()==tag?el:null};sprk.ind=function(el,parent){if(parent){var nodes=parent.querySelectorAll?parent.querySelectorAll(el.tagName):null;if(nodes&&nodes.length){for(var i=0;i<nodes.length;i++){if(el==nodes[i]){return i+1}}}}return null};sprk.LocalStorage={get:function(name){try{return localStorage.getItem(key)}catch(e){}},set:function(name,value){try{localStorage.setItem(key,value);return true}catch(e){return false}},del:function(name){return sprk.LocalStorage.set(name,null)}};sprk.Cookie={get:function(name){name+="=";var cookies=decodeURIComponent(document.cookie).split(";");for(var i in cookies){cookies[i]=cookies[i].trim();if(cookies[i].indexOf(name)==0){return cookies[i].substring(name.length)}}return""},set:function(name,value,days){var d=new Date;d.setTime(d.getTime()+days*864e5);document.cookie=name+"="+value+";expires="+d.toUTCString()+";path=/"},del:function(name){return sprk.Cookie.set(name,null)}};sprk.Location={get:function(){var host=document.domain,href=window.location.href,referrer=this.getReferrer();if(this.isGoogleTranslatePage(host)){referrer=referrer===""?referrer=href:referrer;href=this.getParam(href,"u");host=this.getHost(href)}else if(this.isCachedSerpPage(host)){href=document.links[0].href;host=this.getHost(href)}return[host,href,referrer]},getHost:function(url){var hostRegexp=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),matches=hostRegexp.exec(url);return matches?matches[1]:url},getScriptSrc:function(){for(var s in document.scripts){var src=document.scripts[s].src;if(src&&src.indexOf("/spark.js?")>=0){return src}}return""},getParam:function(url,name){var queryRegex=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)");var matches=queryRegex.exec(url);return matches?this.parseParam(name,matches[1]):null},parseParam:function(field,url){var match=new RegExp("^[^#]*[?&]"+field+"=([^&#]*)").exec(url);return match?decodeURIComponent(match[1].replace(/\+/g," ")):null},parameterize:function(params,base64encoded){var query="",first=true;for(var key in params){query+=(first?"":"&")+encodeURIComponent(key)+"="+encodeURIComponent(params[key]);first=false}return base64encoded?window.btoa(query):query},getReferrer:function(){var referrer=null;try{referrer=window.top.document.referrer}catch(topError){if(window.parent){try{referrer=window.parent.document.referrer}catch(parentError){referrer=null}}}return referrer||document.referrer},isIpAddress:function(string){var ipRegexp=new RegExp("^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$");return ipRegexp.test(string)},isYahooCachedPage:function(host){if(this.isIpAddress(host)){try{var initialDivText=document.body.children[0].children[0].children[0].children[0].children[0].children[0].innerHTML;var cachedIndicator="You have reached the cached page for";return initialDivText.slice(0,cachedIndicator.length)===cachedIndicator}catch(e){return false}}},isGoogleTranslatePage:function(host){return host==="translate.googleusercontent.com"},isCachedSerpPage:function(host){return host==="cc.bingj.com"||host==="webcache.googleusercontent.com"||this.isYahooCachedPage(host)}};window.sprk=sprk})(window,document);(function(window,document){var sprk=window.sprk||{};sprk.XhrRequest=function(method,path,params,headers,onSuccess,onFailure){this._xhr=new XMLHttpRequest;this._timeout=null;this._executing=false;this._xhr.open(method,path+"?args="+sprk.Location.parameterize(params,true),true);this._xhr.setRequestHeader("Accept","application/json");this._xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8");if(headers){for(var key in headers){this._xhr.setRequestHeader(key,headers[key])}}this._xhr.onreadystatechange=function(){if(this._xhr.readyState===4){clearTimeout(this._timeout);if(!this._xhr.responseJSON){var response;try{response=JSON.parse(this._xhr.response)}catch(e){response={}}this._xhr.responseJSON=response}if(this._xhr.status>=400){onFailure&&onFailure(this._xhr)}else if(this._xhr.status>=300){}else if(this._xhr.status>=200){onSuccess&&onSuccess(this._xhr)}this._executing=false}}.bind(this)};sprk.XhrRequest.prototype={send:function(body){if(this._executing){return false}var executing=true;this._timeout=window.setTimeout(function(){this._xhr.abort();this._executing=false},5e3);return this._xhr.send(body?JSON.stringify(body):"")}};sprk.BeaconRequest=function(method,path,headers,onSuccess,onFailure){this._method=method;this._path=path;this._onSuccess=onSuccess;this._onFailure=onFailure};sprk.BeaconRequest.prototype={send:function(body){var req=navigator.sendBeacon(this._path+"?body="+sprk.Location.parameterize(body,true));return typeof this._onSuccess=="function"&&this._onSuccess.call(req)}};sprk.ImageRequest=function(method,path,headers,onSuccess,onFailure){this._method=method;this._path=path;this._image=new Image(1,1);this._image.id="id"+Math.round(Math.random()*1e6);document.body.append(this._image)};sprk.ImageRequest.prototype={send:function(body){this._image.src=this._path+"?body="+sprk.Location.parameterize(body,true)}};window.sprk=sprk})(window,document);(function(window,document){var sprk=window.sprk||{};sprk.RequestQueue=function(api,params,store,bufferSize,batchSize){this._api=api;this._params=params;this._queue=[];this._executing=false};sprk.RequestQueue.prototype={getMethod:function(method){switch(method.toLowerCase()){case"beacon":if(Boolean(navigator&&navigator.sendBeacon)){return"beacon"}case"post":if(Boolean(window.XMLHttpRequest)){return"post"}}return"get"},enqueue:function(method,path,headers,body,onSuccess,onFailure){method=this.getMethod(method);var RequestClass=null;switch(method){case"beacon":RequestClass=sprk.BeaconRequest;break;case"get":RequestClass=sprk.ImageRequest;break;default:RequestClass=sprk.XhrRequest}var req=new RequestClass(method,this._api+path,this._params,headers,onSuccess,onFailure);return req.send(body)},execute:function(){}};window.sprk=sprk})(window,document);(function(window,document){var sprk=window.sprk||{};sprk.Lytics=function(api){var src=sprk.Location.getScriptSrc();var api=api?api:"/";var params={apikey:sprk.Location.getParam(src,"apikey"),version:sprk.Location.getParam(src,"v")};this._queue=new sprk.RequestQueue(api,params);this._pvid=null};sprk.Lytics.prototype={getTimestamp:function(){return(new Date).getTime()},pv:function(){var data={};var referrer=sprk.Location.getReferrer();if(referrer){data["r"]=referrer}var testSections=document.querySelectorAll("section[data-test]");if(testSections.length){var tests={},hasTest=false;for(var i=0;i<testSections.length;++i){var test=testSections[i].getAttribute("data-test"),variant=testSections[i].getAttribute("data-id");if(test&&test.length==36&&variant&&variant.length==36){tests[test]=variant;hasTest=true}}if(hasTest){data["t"]=tests}}return this.pageId||this._queue.enqueue("post","sa/pv",{},data,function(xhr){this._pvid=xhr.responseJSON.id}.bind(this))},up:function(reason){return this._pvid&&this._queue.enqueue("beacon","sa/up",{},{id:this._pvid,reason:reason})},ev:function(section,element,category,action,label,value,params,onSuccess,onFailure){this._queue.enqueue("post","sa/ev",{},{pvid:this._pvid,s:section,e:element,c:category,a:action,l:label,v:value,p:params||null},onSuccess,onFailure);if(window.ga){window.ga("send","event",category,action,label,value)}},fp:function(section,element,csrf,formData,onSuccess,onFailure){var headers=csrf?{"X-CSRFToken":csrf}:{};this._queue.enqueue("post","sa/fp",headers,{pvid:this._pvid,s:section,e:element,c:"form",a:"submit",l:"unstack:"+element,v:null,p:formData},onSuccess,onFailure);if(window.ga){window.ga("send","event","form","submit","unstack:"+element,null)}},flush:function(){this._queue.execute()}};window.sprk=sprk})(window,document);(function(window,document){var sprk=window.sprk||{};sprk.Form=function(form){this.form=form;this.form.addEventListener("submit",this.submitForm.bind(this),false)};sprk.Form.prototype={submitForm:function(ev,sparkForm){ev.preventDefault();var data=this.getData();var csrf=data.csrftoken?data.csrftoken+"":null;if(csrf){delete data["csrftoken"]}window._site._lytics.fp(this.form.getAttribute("data-prefix"),this.form.getAttribute("data-id"),csrf,data,function(xhr){switch(this.form.getAttribute("data-type")){case"submit":this.form.submit();break;case"message":var msg=this.form.querySelector("div.hidden_message");this.form.parentNode.replaceChild(msg,this.form);msg.hidden=false;break;case"redirect":window.location.replace(this.form.getAttribute("data-action"))}}.bind(this),function(xhr){var errors=document.querySelectorAll('[id$="_field_error"]');for(var i in errors){if(errors[i]&&errors[i].style){errors[i].style.display="none"}}if(xhr.responseJSON.errors){var prefix=this.form.getAttribute("data-prefix");for(var name in xhr.responseJSON.errors){var error=xhr.responseJSON.errors[name];var errorDiv=document.getElementById(prefix+"_"+name+"_field_error");errorDiv.style.display="block";errorDiv.querySelector('[class="error_text"]').innerText=error}}}.bind(this));return false},getData:function(){data={};var inputs=this.form.querySelectorAll("[name]");for(var i in inputs){var input=inputs[i];var textareaOrSelect=input&&["TEXTAREA","SELECT"].includes(input.tagName);if(input&&input.getAttribute&&input.getAttribute("name")&&input.getAttribute("type")||textareaOrSelect){switch(input.getAttribute("type")){case"checkbox":data[input.getAttribute("name")]=input.checked;break;case"radio":if(input.checked){data[input.getAttribute("name")]=input.value}break;default:data[input.getAttribute("name")]=input.value}}}return data}};window.sprk=sprk})(window,document);(function(window,document){var sprk=window.sprk||{};sprk.Site=function(){this._lytics=new sprk.Lytics;this._ctrl=false;this._forms=[]};sprk.Site.prototype={clkev:function(el,e,section,element,category,action,label,value,params){var href=el.getAttribute("href");var target=el.getAttribute("target");var isLink=href&&href.toLowerCase().substring(0,11)!="javascript:"&&!target&&!this._ctrl;if(isLink){e.preventDefault();window.setTimeout(function(){window.location.href=href},10)}this._lytics.ev(section,element,category,action,label,value,params);return!isLink},unload:function(reason){this._lytics.up(reason)},load:function(){this._lytics.pv();sprk.on(window,"beforeunload",this.unload.bind(this,"beforeunload"));sprk.on(document.body,"blur",this.unload.bind(this,"blur"));var self=this;var forms=document.querySelectorAll("form.unstack-form");for(var i=0;i<forms.length;++i){this._forms.push(new sprk.Form(forms[i]))}var ctas=document.querySelectorAll("a.button-primary,a.button-secondary,a.text-action");for(var i=0;i<ctas.length;++i){sprk.on(ctas[i],"click",function(e){var sectionId=this.getAttribute("data-section")||this.closest("section").getAttribute("id")||this.getAttribute("id");var section=sprk.prnt(this,"section");if(section&&section.getAttribute("data-test")){self.clkev.call(self,this,e,sectionId,section.getAttribute("data-test"),"test","clickthrough",sectionId,this.getAttribute("data-value"),{el:section.getAttribute("data-id"),lbl:this.innerText})}return self.clkev.call(self,this,e,sectionId,this.getAttribute("id"),this.getAttribute("data-category"),"click",this.innerText,this.getAttribute("data-value"))})}var logo=document.querySelector("header.primary-header div.logo a");if(logo){sprk.on(logo,"click",function(e,sectionId){var img=this.querySelector("img"),label=img?img.getAttribute("alt")||"":"";return self.clkev.call(self,this,e,"header",this.getAttribute("href"),"header_logo","click",label,null)})}var logo=document.querySelector("footer.main-footer a.logo");if(logo){sprk.on(logo,"click",function(e,sectionId){var img=this.querySelector("img"),label=img?img.getAttribute("alt")||"":"";return self.clkev.call(self,this,e,"footer",this.getAttribute("href"),"footer_logo","click",label,null)})}var nav=document.querySelector("header.primary-header nav");if(nav){sprk.on(nav,"click",function(e){var el=sprk.el(e,"a");return el&&self.clkev.call(self,el,e,"header",el.getAttribute("href"),"header_nav","click",el.innerText,sprk.ind(el,this))})}var nav=document.querySelector("footer.main-footer .menus");if(nav){sprk.on(nav,"click",function(e){var el=sprk.el(e,"a");return el&&self.clkev.call(self,el,e,"footer",el.getAttribute("href"),"footer_nav","click",el.innerText,sprk.ind(el,this))})}var social=document.querySelector(".social-icons");if(social){sprk.on(social,"click",function(e){var el=sprk.el(e,"a"),label=el?el.getElementsByTagName("img")[0].getAttribute("alt"):"";return el&&self.clkev.call(self,el,e,"footer",el.getAttribute("href"),"social_link","click",label,sprk.ind(el,this))})}var shares=document.querySelectorAll(".blog-social a");for(var i=0;i<shares.length;++i){sprk.on(shares[i],"click",function(e){var el=sprk.el(e,"a"),label=el?el.getElementsByTagName("img")[0].getAttribute("alt"):"";return el&&self.clkev.call(self,el,e,"footer",el.getAttribute("href"),"social_share","click",label,sprk.ind(el,el.closest(".blog-social")))})}sprk.on(document,"keydown",function(e){this._ctrl=0+e.which==17});sprk.on(document,"keyup",function(){this._ctrl=false})}};sprk.on(window,"load",function(){window._site=new sprk.Site;window._site.load()});window.sprk=sprk})(window,document);(function(window,document){window.jQuery=window.jQuery||function(objOrSelector){if(typeof objOrSelector=="string"){return document.querySelector(objOrSelector)}return objOrSelector}})(window,document);(function(window,document){var sprk=window.sprk||{};window.sprk.HS_KEY_MAP={firstname:"first_name",lastname:"last_name",phone:"phone",email:"email",jobtitle:"title",company:"organization",website:"website",address:"address1",city:"city",state:"state",zip:"zip"};window.sprk.hubspot={onSubmit:function(hsForm){window.hsForm=hsForm;var params={source:"hubspot_form"};if(hsForm&&hsForm.tagName&&hsForm.tagName.toLowerCase()=="form"){var context=hsForm.querySelector("input[name=hs_context]");var fields=context&&context.value?context.value["domFields"]:null;var inputs=hsForm.querySelectorAll("input");for(var i in inputs){if(!fields||fields.indexOf(inputs[i].name)>=0){var name=inputs[i].name,value=inputs[i].value,type=inputs[i].type;if(name=="hs_context"||type=="hidden"||type=="submit"){continue}if(HS_KEY_MAPS[name]){name=HS_KEY_MAPS[name]}params[name]=value}}}window._site._lytics.ev("{id}","{formId}","form","submit","hubspot:{formId}",null,params)}};window.sprk=sprk})(window,document);(function(window,document){var navEl=document.querySelector("header.primary-header:not(.substrate) nav#primary-nav");var toggleEl=document.querySelector("header.primary-header:not(.substrate) #mobile-nav-toggle");if(navEl&&toggleEl){var maskEl=document.createElement("div");maskEl.className="mask";document.body.appendChild(maskEl);if(navigator.userAgent.match(/Android/i)!==null){document.documentElement.className+=" android"}var transitionDuration=300;var transitionTimeoutToken;function open(){clearTimeout(transitionTimeoutToken);navEl.style.setProperty("max-height",navEl.offsetHeight);navEl.classList.remove("closing");navEl.classList.add("open");navEl.classList.add("opening");toggleEl.classList.add("active");maskEl.classList.add("active");setTimeout(function(){navEl.style.setProperty("max-height",navEl.scrollHeight+"px")},0);transitionTimeoutToken=setTimeout(function(){navEl.classList.remove("opening");navEl.style.removeProperty("max-height")},transitionDuration)}function close(){clearTimeout(transitionTimeoutToken);navEl.style.setProperty("max-height",navEl.offsetHeight+"px");navEl.classList.remove("opening");navEl.classList.add("closing");toggleEl.classList.remove("active");maskEl.classList.remove("active");setTimeout(function(){navEl.style.setProperty("max-height","0px")},0);transitionTimeoutToken=setTimeout(function(){navEl.classList.remove("open");navEl.classList.remove("closing");navEl.style.removeProperty("max-height")},transitionDuration)}function toggle(){if(!navEl.classList.contains("open")||navEl.classList.contains("closing")){open()}else{close()}}toggleEl.addEventListener("click",function(e){e.preventDefault();toggle()},false);maskEl.addEventListener("click",function(e){e.preventDefault();close()},false)}})(window,document);(function(window,document){var toggleEls=document.querySelectorAll("header.primary-header:not(.substrate) .mobile-dropdown-icon");var triggers=[];function closeAll(){triggers.forEach(function(trigger,i){trigger.close()})}toggleEls.forEach(function(toggleEl,i){var collapsibleEl=toggleEl.parentElement.querySelector(".secondary-navigation");var transitionDuration=300;var transitionTimeoutToken;triggers.push({open:open,close:close,toggle:toggle});function open(){closeAll();clearTimeout(transitionTimeoutToken);collapsibleEl.style.setProperty("max-height",collapsibleEl.offsetHeight);collapsibleEl.classList.remove("closing");collapsibleEl.classList.add("open");collapsibleEl.classList.add("opening");toggleEl.classList.add("active");setTimeout(function(){collapsibleEl.style.setProperty("max-height",collapsibleEl.scrollHeight+"px")},0);transitionTimeoutToken=setTimeout(function(){collapsibleEl.classList.remove("opening");collapsibleEl.style.removeProperty("max-height")},transitionDuration)}function close(){clearTimeout(transitionTimeoutToken);collapsibleEl.style.setProperty("max-height",collapsibleEl.offsetHeight+"px");collapsibleEl.classList.remove("opening");collapsibleEl.classList.add("closing");toggleEl.classList.remove("active");setTimeout(function(){collapsibleEl.style.setProperty("max-height","0px")},0);transitionTimeoutToken=setTimeout(function(){collapsibleEl.classList.remove("open");collapsibleEl.classList.remove("closing");collapsibleEl.style.removeProperty("max-height")},transitionDuration)}function toggle(){if(!collapsibleEl.classList.contains("open")||collapsibleEl.classList.contains("closing")){open()}else{close()}}toggleEl.addEventListener("click",function(e){e.preventDefault();toggle()},false)})})(window,document);(function(window,document){var sprk=window.sprk||{};var faqElements=document.getElementsByClassName("faq");for(var i=0;i<faqElements.length;i++){sprk.on(faqElements[i],"click",function(){this.classList.toggle("open")})}})(window,document);(function(window,document){var sprk=window.sprk||{};var header=document.querySelector("body:not(.article) header.primary-header");if(header){function checkScrollPosition(){if(window.scrollY>10)header.classList.add("scrolled");else header.classList.remove("scrolled")}checkScrollPosition();sprk.on(window,"scroll",throttle(checkScrollPosition,100))}function throttle(func){var wait=arguments.length<=1||arguments[1]===undefined?100:arguments[1];var timer=null;return function(){var _this=this;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(timer===null){timer=setTimeout(function(){func.apply(_this,args);timer=null},wait)}}}})(window,document);(function(window,document){var aside=document.querySelector("aside.blog-content-aside");if(aside){var article=document.querySelector(".blog-content > article");var footer=document.querySelector(".blog-content > footer");sprk.on(window,"scroll",function(){var asideTop=aside.getBoundingClientRect().top;var articleTop=article.getBoundingClientRect().top;var footerTop=footer.getBoundingClientRect().top;if(articleTop<asideTop&&footerTop>window.innerHeight&&article.offsetHeight>window.innerHeight*1){aside.classList.remove("hide")}else{aside.classList.add("hide")}})}})(window,document);(function(window,document){var sprk=window.sprk||{};if(!sprk.Cookie.get("gdpr")){var gdpr=document.getElementById("gdpr");if(gdpr){gdpr.style.display="block"}}sprk.acceptGdpr=function(e){sprk.Cookie.set("gdpr",true,365);e.target.parentElement.remove()}})(window,document);
